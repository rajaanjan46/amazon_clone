{"ast":null,"code":"var _jsxFileName = \"D:\\\\front-end_project\\\\src\\\\context\\\\CartContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'add':\n      {\n        const found = state.items.find(i => i.product.id === action.product.id);\n        if (found) {\n          return {\n            ...state,\n            items: state.items.map(i => i.product.id === action.product.id ? {\n              ...i,\n              quantity: i.quantity + action.quantity\n            } : i)\n          };\n        }\n        return {\n          ...state,\n          items: [...state.items, {\n            product: action.product,\n            quantity: action.quantity\n          }]\n        };\n      }\n    case 'inc':\n      return {\n        ...state,\n        items: state.items.map(i => i.product.id === action.id ? {\n          ...i,\n          quantity: i.quantity + 1\n        } : i)\n      };\n    case 'dec':\n      return {\n        ...state,\n        items: state.items.map(i => i.product.id === action.id ? {\n          ...i,\n          quantity: Math.max(1, i.quantity - 1)\n        } : i)\n      };\n    case 'remove':\n      return {\n        ...state,\n        items: state.items.filter(i => i.product.id !== action.id)\n      };\n    case 'hydrate':\n      return {\n        ...state,\n        ...action.state\n      };\n    default:\n      return state;\n  }\n}\nexport function CartProvider({\n  children\n}) {\n  _s();\n  const [state, dispatch] = useReducer(reducer, {\n    items: []\n  });\n  useEffect(() => {\n    const raw = localStorage.getItem('cart');\n    if (raw) {\n      try {\n        dispatch({\n          type: 'hydrate',\n          state: JSON.parse(raw)\n        });\n      } catch (e) {}\n    }\n  }, []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state));\n  }, [state]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      state,\n      dispatch\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"7ptzoRiKOlwgO9r5Y7Jk4FZAcUY=\");\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  return useContext(CartContext);\n}\n_s2(useCart, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","jsxDEV","_jsxDEV","CartContext","reducer","state","action","type","found","items","find","i","product","id","map","quantity","Math","max","filter","CartProvider","children","_s","dispatch","raw","localStorage","getItem","JSON","parse","e","setItem","stringify","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","$RefreshReg$"],"sources":["D:/front-end_project/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\n\r\nconst CartContext = createContext();\r\n\r\nfunction reducer(state, action){\r\n  switch(action.type){\r\n    case 'add':{\r\n      const found = state.items.find(i=>i.product.id===action.product.id);\r\n      if(found){\r\n        return { ...state, items: state.items.map(i=> i.product.id===action.product.id ? {...i, quantity: i.quantity + action.quantity } : i) };\r\n      }\r\n      return { ...state, items: [...state.items, { product: action.product, quantity: action.quantity }] };\r\n    }\r\n    case 'inc':\r\n      return { ...state, items: state.items.map(i=> i.product.id===action.id ? {...i, quantity: i.quantity + 1 } : i) };\r\n    case 'dec':\r\n      return { ...state, items: state.items.map(i=> i.product.id===action.id ? {...i, quantity: Math.max(1, i.quantity - 1) } : i) };\r\n    case 'remove':\r\n      return { ...state, items: state.items.filter(i=> i.product.id!==action.id) };\r\n    case 'hydrate':\r\n      return { ...state, ...action.state };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport function CartProvider({ children }){\r\n  const [state, dispatch] = useReducer(reducer, { items: [] });\r\n  useEffect(()=>{\r\n    const raw = localStorage.getItem('cart');\r\n    if(raw){\r\n      try{ dispatch({ type: 'hydrate', state: JSON.parse(raw) }); }catch(e){}\r\n    }\r\n  },[]);\r\n  useEffect(()=>{\r\n    localStorage.setItem('cart', JSON.stringify(state));\r\n  },[state]);\r\n  return (\r\n    <CartContext.Provider value={{ state, dispatch }}>\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\nexport function useCart(){\r\n  return useContext(CartContext);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}